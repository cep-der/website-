<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COORDENADORIA DE ESTUDOS E PESQUISAS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"> <!-- Ícones -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Cabeçalho com Logos -->
    <header class="header-bg text-center py-4">
        <div class="container d-flex justify-content-between align-items-center">
            <!-- Logo do Estado (Esquerda) -->
            <a href="https://sp.gov.br/sp" target="_blank">
                <img src="data/logo_sp_pt_slogan_horizontal.png" alt="Governo do Estado de São Paulo" class="logo-sp">
            </a>

            <!-- Título Centralizado -->
            <div class="header-title">
                <h1 class="fw-bold">COORDENADORIA DE ESTUDOS E PESQUISAS</h1>
                <h2 class="h5">DIRETORIA DE PLANEJAMENTO - DP</h2>
                <h2 class="h5">DER/SP</h2>
            </div>

            <!-- Logo do DER (Direita) -->
            <a href="https://www.der.sp.gov.br/WebSite/Index.aspx" target="_blank">
                <img src="data/logo_der.png" alt="DER-SP" class="logo-der">
            </a>
        </div>
    </header>

    <!-- Menu de Navegação -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="#">DER/SP</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Alternar navegação">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#sobre">Quem Somos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#equipe">Equipe</a></li>
                    <li class="nav-item"><a class="nav-link" href="#projetos">Projetos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#produtos">Produtos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#eventos">Eventos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#estatisticas">Estatísticas</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contato">Contato</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Seção: Quem Somos -->
    <section id="sobre" class="py-5 bg-light text-start">
        <div class="container section-box">
            <h2 class="text-start mb-4">QUEM SOMOS</h2>
            <p>A Coordenadoria de Estudos e Pesquisa (CEP) do Departamento de Estradas de Rodagem do Estado de São Paulo (DER/SP) 
            tem a missão de desenvolver, analisar e aprimorar metodologias e projetos técnicos voltados à infraestrutura rodoviária.</p>

            <!-- Subseção: Nossa Atuação -->
            <div id="atuacao">
                <h3 class="text-start mb-4">NOSSA ATUAÇÃO</h3>
                <ul class="list-unstyled">
                    <li><i class="fas fa-file-alt"></i> Elaboração de estudos técnicos de viabilidade e favorabilidade diversas;</li>
                    <li><i class="fas fa-chart-line"></i> Criação de indicadores multidisciplinares de suporte à decisão;</li>
                    <li><i class="fas fa-balance-scale"></i> Apoio na formulação de políticas públicas voltadas à mobilidade e transporte;</li>
                    <li><i class="fas fa-map-marked-alt"></i> Integração e análise de dados geoespaciais para otimizar a gestão das rodovias no Estado de São Paulo;</li>
                    <li><i class="fas fa-leaf"></i> ESG e Sustentabilidade, apoio na introdução e consolidação de conceitos e boas práticas para minimizar eventuais impactos ambientais;</li>
                    <li><i class="fas fa-recycle"></i> Apoio na adesão ao programa estadual de descarbonização "São Paulo Carbono Zero".</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Seção: Equipe -->
    <section id="equipe" class="py-5 text-start">
        <div class="container section-box">
            <h2 class="text-start mb-4">EQUIPE</h2>
            <p>Conheça nossa equipe de especialistas em estudos e pesquisas rodoviárias.</p>
            <!-- Adicione aqui os membros da equipe -->
        </div>
    </section>

    <!-- Seção: Projetos -->
    <section id="projetos" class="py-5 bg-light text-start">
        <div class="container section-box">
            <h2 class="text-start mb-4">PROJETOS</h2>
            <p>Confira os principais projetos desenvolvidos pela CEP.</p>
            <!-- Adicione aqui os projetos -->
        </div>
    </section>

    <!-- Seção: Produtos -->
    <section id="produtos" class="py-5 text-start">
        <div class="container section-box">
            <h2 class="text-start mb-4">PRODUTOS</h2>
            <p>Explore os produtos gerados pela Coordenadoria de Estudos e Pesquisa.</p>
            <!-- Adicione aqui os produtos -->
        </div>
    </section>

    <!-- Seção: Eventos -->
    <section id="eventos" class="py-5 bg-light text-start">
        <div class="container section-box">
            <h2 class="text-start mb-4">EVENTOS</h2>
            <p>Participe dos eventos organizados pela CEP.</p>
            <!-- Adicione aqui os eventos -->
        </div>
    </section>

    <!-- Seção: Estatísticas -->
    <section id="estatisticas" class="py-5 text-start">
        <div class="container section-box">
            <h2 class="text-start mb-4">ESTATÍSTICAS</h2>
            
            <p>
                A Coordenadoria de Estudos e Pesquisa (CEP) realiza análises detalhadas sobre processos e projetos rodoviários, 
                fornecendo informações estratégicas para a tomada de decisão.
            </p>

            <!-- Grade 2x2 para os gráficos -->
            <div class="row">
                <!-- Gráfico 1: Coluna Empilhada -->
                <div class="col-lg-6 mb-4">
                    <div class="grafico-box">
                        <canvas id="graficoColunaEmpilhada"></canvas>
                    </div>
                </div>

                <!-- Gráfico 2: Barra -->
                <div class="col-lg-6 mb-4">
                    <div class="grafico-box">
                        <canvas id="graficoBarra"></canvas> <!-- Novo gráfico adicionado -->
                    </div>
                </div>

                <!-- Espaços para gráficos futuros -->
                <div class="col-lg-6 mb-4">
                    <div class="grafico-box" id="grafico-3"></div>
                </div>
                <div class="col-lg-6 mb-4">
                    <div class="grafico-box" id="grafico-4"></div>
                </div>
            </div>

            <div class="text-center mt-4">
                <a href="mais_estatisticas.html" class="btn btn-primary">Mais estatísticas</a>
            </div>
        </div>
    </section>


    <!-- Seção: Contato -->
    <section id="contato" class="py-5 text-start">
        <div class="container section-box">
            <h2 class="text-start mb-4">CONTATO</h2>
            <p>Em breve, informações de contato da CEP.</p>
        </div>
    </section>

    <!-- Rodapé -->
    <footer class="bg-dark text-white text-center py-3">
        <p>© 2025 Coordenadoria de Estudos e Pesquisa - DER/SP</p>
    </footer>

     <!-- Adicionar automaticamente gráficos de 2025 -->
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const pastaGraficos = "graficos/"; // Pasta onde os gráficos estão armazenados
        const secaoEstatisticas = document.getElementById("estatisticas"); // Seção onde os gráficos serão adicionados

        fetch(pastaGraficos) // Lista os arquivos na pasta "graficos"
            .then(response => response.text())
            .then(data => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(data, "text/html");
                const arquivos = Array.from(doc.querySelectorAll("a"))
                    .map(link => link.href)
                    .filter(nome => nome.includes("2025_") && nome.endsWith(".js")); // Filtra apenas arquivos de 2025

                arquivos.forEach(arquivo => {
                    const nomeArquivo = arquivo.split("/").pop(); // Obtém apenas o nome do arquivo
                    const nomeID = nomeArquivo.replace("_barra.js", ""); // Remove a extensão e "_barra.js"
                    
                    // Criar dinamicamente um <canvas> para o gráfico
                    const graficoDiv = document.createElement("div");
                    graficoDiv.classList.add("col-lg-6", "mb-4");

                    const canvas = document.createElement("canvas");
                    canvas.id = nomeID;
                    graficoDiv.appendChild(canvas);

                    // Adiciona o gráfico na seção de estatísticas
                    secaoEstatisticas.querySelector(".row").appendChild(graficoDiv);

                    // Criar dinamicamente um <script> para carregar o gráfico correspondente
                    const script = document.createElement("script");
                    script.src = pastaGraficos + nomeArquivo;
                    document.body.appendChild(script);
                });
            })
            .catch(error => console.error("Erro ao buscar os arquivos de gráficos:", error));
    });
    </script>

</body>
</html>